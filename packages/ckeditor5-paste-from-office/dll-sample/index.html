<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>DLL sample - Paste From Office</title>
	<style>
		.clipboard-title {
			font-size: 1em;
		}
	</style>
</head>
<body>

<div id="editor">
	<h2>Paste here:</h2>

	<p></p>

	<p>or <strong>here:</strong></p>

	<ul>
		<li>Maybe <a href="https://github.com/ckeditor/ckeditor5">somewhere <i>here</i>?</a></li>
	</ul>
</div>

<h2 class="clipboard-title">Clipboard HTML</h2>
<div id="html" contenteditable="true" style="width:100%;height:300px;background-color:#EEE;overflow:auto;"></div>

<h2 class="clipboard-title">Clipboard text</h2>
<div id="text" contenteditable="true" style="width:100%;height:100px;background-color:#DDD;overflow:auto;"></div>

<h2 class="clipboard-title">Clipboard normalized HTML view after transformation</h2>
<div id="data" contenteditable="true" style="width:100%;height:100px;background-color:#CCC;overflow:auto;">[DISABLED in DLL]</div>

<script src="https://unpkg.com/@ckeditor/ckeditor5-inspector/build/inspector.js"></script>

<!-- This adds the CKEditor5.dll() in the global scope, so it is possible to reference its contents -->
<script src="./../../../node_modules/ckeditor5/build/ckeditor5-dll.js"></script>

<!-- Those are stripped-down editors with Essentials plugins loaded from a DLL, exposed on CKEditor global -->
<script src="./../../../node_modules/@ckeditor/ckeditor5-dll-classic/build/dll-classic.js"></script>

<!-- Editor features as DLL consumer builds exposed as CKEditor5[featureName] -->
<script src="./../../../node_modules/@ckeditor/ckeditor5-adapter-ckfinder/build/adapter-ckfinder.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-alignment/build/alignment.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-autoformat/build/autoformat.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-autosave/build/autosave.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-basic-styles/build/basic-styles.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-block-quote/build/block-quote.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-ckfinder/build/ckfinder.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-cloud-services/build/cloud-services.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-code-block/build/code-block.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-easy-image/build/easy-image.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-font/build/font.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-heading/build/heading.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-highlight/build/highlight.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-horizontal-line/build/horizontal-line.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-html-embed/build/html-embed.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-image/build/image.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-indent/build/indent.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-link/build/link.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-list/build/list.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-markdown-gfm/build/markdown-gfm.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-media-embed/build/media-embed.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-mention/build/mention.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-page-break/build/page-break.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-paste-from-office/build/paste-from-office.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-remove-format/build/remove-format.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-restricted-editing/build/restricted-editing.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-special-characters/build/special-characters.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-table/build/table.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-watchdog/build/watchdog.js"></script>
<script src="./../../../node_modules/@ckeditor/ckeditor5-word-count/build/word-count.js"></script>

<script>
	const TOKEN_URL = 'https://33333.cke-cs.com/token/dev/ijrDsqFix838Gh3wGO3F77FSW94BwcLXprJ4APSp3XQ26xsUHTi0jcb1hoBt';
	const UPLOAD_URL = 'https://33333.cke-cs.com/easyimage/upload/';

	const {
		ClassicEditor,
		blockQuote,
		codeBlock,
		basicStyles,
		heading,
		htmlEmbed,
		image,
		indent,
		link,
		list,
		mediaEmbed,
		table,
		pageBreak,
		cloudServices,
		easyImage,
		font
	} = CKEditor5;

	const config = {
		extraPlugins: [
			blockQuote.BlockQuote,
			codeBlock.CodeBlock,
			heading.Heading,
			basicStyles.Bold,
			basicStyles.Italic,
			basicStyles.Code,
			basicStyles.Strikethrough,
			basicStyles.Underline,
			list.List,
			link.Link,
			font.Font,
			image.Image,
			image.ImageInsert,
			image.ImageCaption,
			image.ImageStyle,
			image.ImageToolbar,
			mediaEmbed.MediaEmbed,
			table.Table,
			table.TableToolbar,
			table.TableProperties,
			table.TableCellProperties,
			pageBreak.PageBreak,
			cloudServices.CloudServices,
			easyImage.EasyImage
		].filter( plugin => !!plugin ),
		toolbar: [ 'heading', '|', 'bold', 'italic', 'strikethrough', 'underline', 'link', 'bulletedList', 'numberedList', 'blockQuote', 'insertTable', 'pageBreak', 'undo', 'redo' ],
		image: {
			toolbar: [ 'imageStyle:full', 'imageStyle:side', '|', 'imageTextAlternative' ]
		},
		table: {
			contentToolbar: [ 'tableColumn', 'tableRow', 'mergeTableCells', 'tableProperties', 'tableCellProperties' ]
		},
		cloudServices: {
			tokenUrl: TOKEN_URL,
			uploadUrl: UPLOAD_URL
		}
	};

	// ClassicEditor is exposed by the ckeditor5-dll-classic:
	ClassicEditor.create( document.querySelector( '#editor' ), config )
		.then( editor => {
			window.editor = editor;

			const htmlDiv = document.querySelector( '#html' );
			const textDiv = document.querySelector( '#text' );
			// const dataDiv = document.querySelector( '#data' );

			CKEditorInspector.attach( editor );

			const clipboard = editor.plugins.get( 'Clipboard' );

			editor.editing.view.document.on( 'paste', ( evt, data ) => {
				console.clear();

				console.log( '----- paste -----' );
				console.log( data );
				console.log( 'text/html\n', data.dataTransfer.getData( 'text/html' ) );
				console.log( 'text/plain\n', data.dataTransfer.getData( 'text/plain' ) );

				htmlDiv.innerText = data.dataTransfer.getData( 'text/html' );
				textDiv.innerText = data.dataTransfer.getData( 'text/plain' );
			} );

			clipboard.on( 'inputTransformation', ( evt, data ) => {
				console.log( '----- clipboardInput ----- [DISABLED in DLL]' );
				// console.log( 'stringify( data.dataTransfer )\n', stringifyView( data.content ) );
				//
				// dataDiv.innerText = stringifyView( data.content );
			} );
		} );
</script>
</body>
</html>
